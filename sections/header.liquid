<header class=" header">
  <div class="relative bg-white">
    <div class="mx-auto px-4 sm:px-6">
      <div class="flex justify-center items-center py-6 md:justify-start md:space-x-10">

          
          <div class="flex justify-start lg:flex-1 truncate">
            <h1 class="text-xl font-bold truncate">{{ shop.name }}</h1>
          </div>

          <nav x-data="{ open: false }" class="hidden md:flex space-x-10">
            {% for link in linklists.main-menu.links %}
                {% if link.links != blank %}
                    <div class="relative">
                        <button x-on:click="open = ! open" type="button" class="inline-flex items-center text-base text-gray-500 hover:text-gray-900">
                            {{ link.title }}
                            {% render 'icon-dropdown' %}
                        </button>

                        <div x-show="open" @click.away="open = false" class="absolute z-10 -ml-5 mt-5 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2">
                            <div class="shadow-lg border ring-black ring-opacity-5 overflow-hidden rounded-lg">
                                <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
                                    {% for sublink in link.links %}
                                        <a href="{{ sublink.url }}" class="-m-3 p-3 flex items start rounded-lg hover:bg-gray-100">
                                            <div class="ml-4">
                                                <p class="text-gray-900 text-base font-medium">
                                                    {{ sublink.title }}
                                                </p>
                                            </div>
                                        </a>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>                   
                    </div>   
                {% else %}
                    <div class="relative">
                        <a href="{{ link.url }}" class="text-base text-gray-500 hover:text-gray-900">{{ link.title }}</a>
                    </div>                     
                {% endif %}
            {% endfor %}
          </nav>
          
          <!-- CART BUTTON / ACCOUNT LINKS IF ENABLED -->
          <div class="hidden md:flex items-center justify-end md:flex-1 space-x-5">
              <a href="{{ routes.cart_url }}" class="whitespace-nowrap text-base text-gray-500 hover:text-gray-900">
                  {% render 'icon-shopping-bag' %}
              </a>

              {% if shop.customer_accounts_enabled %}
                  {% if customer %}
                      <a href="{{ routes.account_url }}" class="text-base text-gray-500 hover:text-gray-900">account</a>
                      {{ 'Log out'  | customer_logout_link | replace: '<a', '<a class="text-base text-gray-500 hover:text-gray-900"' }}
                  {% else %}
                      {{ 'Log in ' | customer_login_link | replace: '<a', '<a class="text-base text-gray-500 hover:text-gray-900"' }}
                      {{ 'Register' | customer_register_link | replace: '<a', '<a class="text-base text-gray-500 hover:text-gray-900"' }}
                  {% endif %}
              {% endif %}
          </div>

          {% if section.settings.show_search %}
            <form action="/search">
              <input type="search" name="q"/>
              <button type="submit">Search</button>
            </form> 
          {% endif %}
          
      </div>
    </div>
  </div>
</header>

<style>  
  .header{
      background: {{ section.settings.bg }};
  }
</style>

{% stylesheet %}
     .header {
        padding: 20px;
     }
{% endstylesheet%}

{% schema %}
    {
        "name": "Header",
        "settings": [
          {
            "type": "checkbox",
            "id": "show_search",
            "label": "Show search form?",
            "default": true,
            "info": "Display search dialog"
          },
          {
            "type": "color",
            "id": "bg",
            "label": "This is a search box"
          } 
        ]
    }
{% endschema %}
